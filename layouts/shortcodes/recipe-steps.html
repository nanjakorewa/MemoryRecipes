{{ $steps := .Page.Params.steps }}
{{ if not $steps }}
  {{ warnf "recipe-steps shortcode requires [[steps]] front matter on %s" .Page.Path }}
{{ else }}
  <section class="recipe-steps">
    <ol>
      {{ range $index, $step := $steps }}
        <li>
          <header>
            <span class="step-index">{{ printf "%02d" (add $index 1) }}</span>
            <div class="step-title">
              <h3>{{ $step.title }}</h3>
              <div class="step-meta">
                {{ with $step.timer }}
                  <button
                    type="button"
                    class="step-meta__chip step-meta__chip--timer"
                    data-timer-duration="{{ . }}"
                    data-timer-label="{{ printf "%s · %s" $.Page.Title $step.title | htmlEscape }}"
                  >
                    ⏱ {{ i18n "recipeTimerLabel" }}: {{ . }}
                  </button>
                {{ end }}
                {{ with $step.heat }}
                  <span class="step-meta__chip step-meta__chip--heat">🔥 {{ i18n "recipeHeatLabel" }}: {{ . }}</span>
                {{ end }}
              </div>
            </div>
          </header>
          <div class="step-body">{{ $step.detail | markdownify }}</div>
          {{ with $step.tip }}<p class="step-tip">💡 {{ . }}</p>{{ end }}
        </li>
      {{ end }}
    </ol>
  </section>
{{ end }}
